# Filter definitions for capability-based field visibility
.brightness_support: &brightness_support
  attribute:
    supported_color_modes:
      - light.ColorMode.BRIGHTNESS
      - light.ColorMode.COLOR_TEMP
      - light.ColorMode.HS
      - light.ColorMode.XY
      - light.ColorMode.RGB
      - light.ColorMode.RGBW
      - light.ColorMode.RGBWW

.color_support: &color_support
  attribute:
    supported_color_modes:
      - light.ColorMode.HS
      - light.ColorMode.XY
      - light.ColorMode.RGB
      - light.ColorMode.RGBW
      - light.ColorMode.RGBWW

.color_temp_support: &color_temp_support
  attribute:
    supported_color_modes:
      - light.ColorMode.COLOR_TEMP
      - light.ColorMode.HS
      - light.ColorMode.XY
      - light.ColorMode.RGB
      - light.ColorMode.RGBW
      - light.ColorMode.RGBWW

fade_lights:
  name: Fade lights
  description: Fades lights to a desired brightness and/or color over a specified transition period.
  target:
    entity:
      domain: light
  fields:
    transition:
      name: Transition time
      description: Transition time for fading in seconds.
      filter: *brightness_support
      example: "3"
      selector:
        number:
          min: 0
          max: 3600
          step: 0.1
          mode: box
          unit_of_measurement: "s"
    rgb_color:
      name: Color
      description: Target color as [red, green, blue] values (0-255 each).
      filter: *color_support
      example: "[255, 128, 0]"
      selector:
        color_rgb:
    color_temp_kelvin:
      name: Color temperature
      description: Target color temperature in Kelvin.
      filter: *color_temp_support
      example: 4000
      selector:
        color_temp:
          unit: kelvin
          min: 2000
          max: 6500
    brightness_pct:
      name: Brightness
      description: Target brightness level as a percentage (0-100).
      filter: *brightness_support
      example: 75
      selector:
        number:
          min: 0
          max: 100
          mode: slider
          unit_of_measurement: "%"
    advanced_fields:
      name: Advanced options
      collapsed: true
      fields:
        easing:
          name: Easing curve
          description: >-
            Controls how brightness changes over time. 'auto' selects based on fade
            direction: ease_in (slow start) for fading up, ease_out (slow end) for
            fading down.
          filter: *brightness_support
          example: "auto"
          selector:
            select:
              options:
                - label: Auto (recommended)
                  value: auto
                - label: Linear (no easing)
                  value: linear
                - label: Ease in (slow start)
                  value: ease_in_quad
                - label: Ease in cubic (slower start)
                  value: ease_in_cubic
                - label: Ease out (slow end)
                  value: ease_out_quad
                - label: Ease out cubic (slower end)
                  value: ease_out_cubic
                - label: Ease in-out sine (smooth S-curve)
                  value: ease_in_out_sine
        from:
          name: Starting values
          description: Override starting values instead of using current state.
          filter: *brightness_support
          example: "{ brightness_pct: 0, color_temp_kelvin: 2700 }"
          selector:
            object:
        rgbw_color:
          name: RGBW color
          description: Target color as [red, green, blue, white] values (0-255 each).
          filter: *color_support
          example: "[255, 128, 0, 50]"
          selector:
            object:
        rgbww_color:
          name: RGBWW color
          description: Target color as [red, green, blue, cold_white, warm_white] values (0-255 each).
          filter: *color_support
          example: "[255, 128, 0, 50, 30]"
          selector:
            object:
        hs_color:
          name: HS color
          description: Target color as [hue (0-360), saturation (0-100)].
          filter: *color_support
          example: "[200, 80]"
          selector:
            object:
        xy_color:
          name: XY color
          description: Target color as CIE xy coordinates [x, y] (0-1 each).
          filter: *color_support
          example: "[0.3, 0.4]"
          selector:
            object:
        brightness:
          name: Brightness value
          description: Target brightness as raw value (1-255).
          filter: *brightness_support
          example: 255
          selector:
            number:
              min: 1
              max: 255
